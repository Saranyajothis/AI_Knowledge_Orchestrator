# MongoDB Backup Configuration
mongodb:
  backup:
    enabled: true
    path: ./backup/mongodb
    cron: "0 0 2 * * ?" # Daily at 2 AM
    retention:
      days: 7
    compression: true

# MongoDB Performance Settings
mongo:
  performance:
    slow-query-threshold-ms: 100
    profiling-level: 1 # 0=off, 1=slow ops, 2=all ops
    index-creation-on-startup: trueserver:
  port: 8080
  servlet:
    context-path: /

spring:
  application:
    name: ai-knowledge-orchestrator
  
  # MongoDB Configuration
  data:
    mongodb:
      uri: mongodb://localhost:27017/ai_orchestrator
      auto-index-creation: true
      # Connection pool configuration
      min-connections-per-host: 10
      max-connections-per-host: 100
      threads-allowed-to-block-for-connection-multiplier: 5
      server-selection-timeout: 30000
      connect-timeout: 10000
      socket-timeout: 0
      max-wait-time: 120000
      
  # Security Configuration
  security:
    user:
      name: admin
      password: admin123
  
  # Jackson Configuration
  jackson:
    default-property-inclusion: NON_NULL
    serialization:
      write-dates-as-timestamps: false
    time-zone: UTC

# JWT Configuration
jwt:
  secret: dGhpc2lzYXZlcnlsb25nc2VjcmV0a2V5Zm9yand0dG9rZW5nZW5lcmF0aW9uYW5kc2hvdWxkYmVhdGxlYXN0MjU2Yml0c2xvbmc=
  expiration: 86400000 # 24 hours in milliseconds
  refresh:
    expiration: 604800000 # 7 days in milliseconds

# Actuator Configuration
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus,env,loggers,threaddump
      base-path: /actuator
  endpoint:
    health:
      show-details: always
      show-components: always
      probes:
        enabled: true
    metrics:
      enabled: true
  metrics:
    export:
      simple:
        enabled: true
    tags:
      application: ${spring.application.name}
      environment: ${spring.profiles.active:default}
  info:
    env:
      enabled: true
    build:
      enabled: true
    git:
      enabled: true
      mode: full

# Logging Configuration
logging:
  level:
    root: INFO
    com.aiko.orchestrator: DEBUG
    org.springframework.security: DEBUG
    org.springframework.data.mongodb: DEBUG
    org.springframework.web: DEBUG
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%X{correlationId}] [%X{requestId}] %-5level %logger{36} - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%X{correlationId}] [%X{requestId}] %-5level %logger{36} - %msg%n"
  file:
    name: logs/ai-orchestrator.log
    max-size: 10MB
    max-history: 30

# OpenAPI/Swagger Configuration
springdoc:
  api-docs:
    enabled: true
    path: /v3/api-docs
  swagger-ui:
    enabled: true
    path: /swagger-ui.html
    tags-sorter: alpha
    operations-sorter: alpha
    display-request-duration: true
    filter: true
  packages-to-scan: com.aiko.orchestrator.controller
  paths-to-match: /**

# Application-specific configuration
app:
  name: AI Knowledge Orchestrator
  version: 1.0.0
  description: AI-powered knowledge orchestration system with Spring Boot and MongoDB
  
  cors:
    allowed-origins:
      - http://localhost:3000
      - http://localhost:4200
      - http://localhost:8080
    allowed-methods:
      - GET
      - POST
      - PUT
      - DELETE
      - OPTIONS
      - PATCH
    allowed-headers:
      - "*"
    exposed-headers:
      - X-Correlation-Id
      - X-Request-Id
    allow-credentials: true
    max-age: 3600

# Rate Limiting Configuration (if using Bucket4j)
rate-limiting:
  enabled: true
  requests-per-minute: 60
  requests-per-hour: 1000

# Redis Configuration (for caching and rate limiting)
spring.redis:
  host: localhost
  port: 6379
  password: 
  timeout: 2000ms
  jedis:
    pool:
      max-active: 8
      max-idle: 8
      min-idle: 0
